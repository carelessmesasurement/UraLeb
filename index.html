<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UraLeb - Uranium Research Center</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        function checkPassword() {
            var inputPassword = document.getElementById("password-input").value;
            if (inputPassword === "UraLeb2024") {
                document.getElementById("employee-section").style.display = 'block';
                document.getElementById("password-section").style.display = 'none';
                document.getElementById("error-message").style.display = 'none'; // Hide error message
            } else {
                document.getElementById("error-message").innerText = "Incorrect password. Try again.";
                document.getElementById("error-message").style.display = 'block'; // Show error message
            }
        }

        function displaySection(sectionId) {
            // Hide all sections first
            var sections = document.querySelectorAll('.content-section');
            sections.forEach(function(section) {
                section.style.display = 'none';
            });
            // Show the specific section
            document.getElementById(sectionId).style.display = 'block';
        }

        function displayWelcome() {
            displaySection('welcome-section');
        }
    </script>
<script>
    function sortTable(columnIndex) {
        const table = document.getElementById("dataTable");
        const headerCells = table.rows[0].cells;
        const rows = Array.from(table.rows).slice(1); // Exclude the header row
        const isAscending = headerCells[columnIndex].classList.toggle("sorted-asc");
        
        // Remove previous sorting classes
        Array.from(headerCells).forEach((cell, index) => {
            if (index !== columnIndex) {
                cell.classList.remove("sorted-asc", "sorted-desc", "active");
            }
        });

        // Highlight the active header
        headerCells[columnIndex].classList.toggle("active", true);
        headerCells[columnIndex].classList.toggle("sorted-desc", !isAscending);
        
        // Define severity ranking
        const severityRank = {
            "Critical": 4,
            "High": 3,
            "Moderate": 2,
            "Minor": 1
        };

        // Sort rows based on the column index
        rows.sort((rowA, rowB) => {
            const cellA = rowA.cells[columnIndex].innerText;
            const cellB = rowB.cells[columnIndex].innerText;

            if (columnIndex === 0) { // Date column
                const dateA = new Date(cellA.split('/').reverse().join('-')); // Convert to YYYY-MM-DD
                const dateB = new Date(cellB.split('/').reverse().join('-'));
                return isAscending ? dateA - dateB : dateB - dateA;
            } else if (columnIndex === 1) { // Severity column
                return isAscending 
                    ? severityRank[cellA] - severityRank[cellB] 
                    : severityRank[cellB] - severityRank[cellA];
            } else { // Description column
                return isAscending 
                    ? cellA.localeCompare(cellB) 
                    : cellB.localeCompare(cellA);
            }
        });

        // Remove existing rows and append sorted rows
        rows.forEach(row => table.appendChild(row));
    }
</script>
</head>
<body onload="displayWelcome()" background="background-tile.png">

    <table width="100%" cellpadding="10" cellspacing="0" border="0">
        <tr>
            <td colspan="2" align="left" bgcolor="#f2f6fc">
                <img src="logo.png" alt="UraLeb Logo" width="150" height="50">
                <h1 class="flashing-text">UraLeb - Uranium Research Center</h1>
                <p><i>Pioneering Nuclear Science in Lebanon since 1995</i></p>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <marquee behavior="scroll" direction="left" bgcolor="#2980B9" style="color: white; padding: 10px;">
                    <strong>Welcome to UraLeb! [16/10/2010 BREAKTHROUGH] Recent experiments are a success!</strong>
                </marquee>
            </td>
        </tr>
        <tr>
            <td width="25%" valign="top" bgcolor="#ECF0F1" style="border-right: 2px solid #BDC3C7;">
                <h3>Navigation</h3>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="displaySection('welcome-section')" class="nav-button">Home</button>
                    <button onclick="displaySection('about-section')" class="nav-button">About UraLeb</button>
                    <button onclick="displaySection('research-section')" class="nav-button">Research</button>
                    <button onclick="displaySection('safety-section')" class="nav-button">Safety Protocols</button>
                    <button onclick="displaySection('contact-section')" class="nav-button">Contact</button>
                    <button onclick="displaySection('password-section')" class="nav-button">Employee Section</button>
                </div>
                <h3>Visit Counter</h3>
                <img src="hit-counter.gif" alt="Hit Counter">
            </td>
            <td width="75%" valign="top">
                <!-- Hidden Content Sections -->
                <div id="welcome-section" class="content-section">
                    <h2>Welcome to UraLeb</h2>
                    <p>Founded in 1995, UraLeb is Lebanon’s premier Uranium Research Center, focusing on nuclear science, energy development, and isotope separation. We are committed to the peaceful and safe use of nuclear energy, advancing the boundaries of science in the Middle East. Our latest research breakthroughs have positioned UraLeb as a leading voice in uranium science.</p>
                    
                    <h3>Our Vision</h3>
                    <p>At UraLeb, we believe that nuclear energy is the key to a sustainable future. With the world facing energy shortages, climate change, and the need for sustainable resources, our research into uranium isotopes provides a solution that is clean, efficient, and scalable.</p>

                    <h3>Our Team</h3>
                    <p>Our team consists of world-renowned scientists, engineers, and nuclear researchers. With decades of combined experience, we are pushing the envelope on uranium research in Lebanon and beyond.</p>
                </div>

                <div id="about-section" class="content-section" style="display:none;">
                    <h2>About UraLeb</h2>
                    <p>UraLeb began as a small initiative to explore nuclear energy solutions for Lebanon. Over the years, our team has grown to include some of the most talented nuclear scientists in the region. Our mission is to make uranium research safe, sustainable, and applicable to modern energy needs.</p>

                    <h3>Our Facilities</h3>
                    <p>UraLeb operates state-of-the-art facilities designed for advanced nuclear research. Located in Beirut, our headquarters include isotope labs, testing chambers, and safety centers where cutting-edge research is conducted.</p>
                    <img src="facility1.jpg" alt="Research Facility 1" width="250" height="150" class="image-hover">
                    <img src="facility2.jpg" alt="Research Facility 2" width="250" height="150" class="image-hover">
                </div>

                <div id="research-section" class="content-section" style="display:none;">
                    <h2>Research</h2>
                    <p>Our research focuses on three key areas:</p>
                    <ul>
                        <li><strong>Uranium Isotope Separation</strong>: Pioneering new techniques in separating uranium isotopes to improve energy output.</li>
                        <li><strong>Nuclear Safety Protocols</strong>: Developing methods to ensure that uranium handling is done in the safest manner possible.</li>
                        <li><strong>Energy Development</strong>: Optimizing nuclear reactors to use uranium more efficiently for energy production.</li>
                    </ul>
                    <h3>Latest Research Publications</h3>
                    <ul>
                        <li><a href="#">The Use of Uranium-235 in Energy Solutions</a></li>
                        <li><a href="#">Safety Protocols for New Nuclear Facilities</a></li>
                        <li><a href="#">The Impact of Uranium on Natural Resources</a></li>
                    </ul>
                </div>

                <div id="safety-section" class="content-section" style="display:none;">
                    <h2>Safety Protocols</h2>
                    <p>At UraLeb, safety is our number one priority. We have developed extensive protocols to ensure that uranium is handled securely and that research is conducted in compliance with international nuclear safety standards.</p>
                
                    <h3 style="background-color: #cfcfcf; padding: 20px; color: black;">Emergency Response Plans</h3>
                    <p>Our emergency response plans are designed to minimize risk in the unlikely event of a nuclear incident. With trained personnel and state-of-the-art safety systems in place, we ensure that our operations are as safe as possible.</p>
                
                    <h3>Alert Types</h3>
                    <p>UraLeb employs several alert systems to notify personnel of various situations. Here are some of the main alert types:</p>
                    <ul style="background-color: #e6e6e6; padding: 20px; color: black;">
                        <li>
                            <strong style="background-color: red;">Red Alert:</strong> An imminent threat requiring immediate action. 
                            <button class="retro-button" onclick="document.getElementById('red-alert').play()">Play Sound</button>
                            <audio id="red-alert" src="red-alert-sound.mp3" preload="none"></audio>
                            <p>Sound Description: A loud, continuous siren, typically followed by an automated voice indicating the nature of the threat.</p>
                        </li>
                        <li>
                            <strong style="background-color: yellow;">Yellow Alert:</strong> A warning indicating a potential issue that requires attention.
                            <button class="retro-button" onclick="document.getElementById('yellow-alert').play()">Play Sound</button>
                            <audio id="yellow-alert" src="yellow-alert-sound.mp3" preload="none"></audio>
                            <p>Sound Description: A series of short beeps followed by a recorded message giving instructions.</p>
                        </li>
                        <li>
                            <strong style="background-color: limegreen;">Green Alert:</strong> All clear, indicating that previous issues have been resolved.
                            <button class="retro-button" onclick="document.getElementById('green-alert').play()">Play Sound</button>
                            <audio id="green-alert" src="green-alert-sound.mp3" preload="none"></audio>
                            <p>Sound Description: A pleasant chime signaling that it is safe to resume normal operations.</p>
                        </li>
                    </ul>
                
                    <h3 style="background-color: #e6e6e6; padding: 20px; color: black;">Emergency Systems Overview</h3>
                    <pre style="background-color: white; padding: 20px; color: black; text-align: center;">
         [ALERT SYSTEM DIAGRAM]
┌───────────┌─────┐┐    ┌──────────────────┐
│ Emergency │ ooo ││    │ Power plant      │
│ Control   │ ooo ││    │                  │
│ Panel     │ ooo │◄────┼ AC power         │
│           │  o  ││    │                  │
│ ──────────┴─────┘◄─┐  │                  │
└────────┬─────────┘ │  └──────────────────┘
         │           │  ┌┌┌────────────────┐
         │           │  │││Backup generator│
         │           └──│││──────&─────────│
         │              │││Backup          │
         │  ┌──────────►│││Batteries       │
┌────────▼──┴┌─────┐    └└└────────────────┘
│ Emergency  │ ├───│    ┌───────┌──────────┐
│ Coordinator│ ├───│─┬─►│Sirens ├─────────►│
├────────────└─────┘ │  └───────└──────────┘
├──────────────────┤ │    ┌──────┌─────────┐
└────────┬─────────┘ ├───►│Lights├────────►│
         │           │    └──────└─────────┘
┌────────▼─┌──────┐┐ │       ┌─────┌───────┐
│System log│┼┼┼┼┼┼││ └──────►│Doors├──────►│
└──────────└──────┘┘         └─────└───────┘
                    </pre>
                
                    <h3>Q&A on Safety Protocols</h3>
                    <div class="faq">
                        <div style="margin-bottom: 10px;">
                            <button class="retro-button" onclick="toggleAnswer('qa1')">Q: What should I do during a Red Alert?</button>
                            <p id="qa1" style="display:none; background-color: #e6e6e6; padding: 20px;">A: Immediately follow evacuation procedures and report to your designated assembly area. Stay calm and await further instructions.</p>
                        </div>
                        
                        <div style="margin-bottom: 10px;">
                            <button class="retro-button" onclick="toggleAnswer('qa2')">Q: How are personnel trained for emergencies?</button>
                            <p id="qa2" style="display:none; background-color: #e6e6e6; padding: 20px;">A: All personnel undergo rigorous training simulations and emergency response drills to prepare for various scenarios.</p>
                        </div>
                
                        <div style="margin-bottom: 10px;">
                            <button class="retro-button" onclick="toggleAnswer('qa3')">Q: What is the purpose of the Yellow Alert?</button>
                            <p id="qa3" style="display:none; background-color: #e6e6e6; padding: 20px;">A: A Yellow Alert indicates that while there is no immediate threat, vigilance is required. Staff should monitor the situation and remain alert for updates.</p>
                        </div>
                
                        <div style="margin-bottom: 10px;">
                            <button class="retro-button" onclick="toggleAnswer('qa4')">Q: Are the alert sounds standardized?</button>
                            <p id="qa4" style="display:none; background-color: #e6e6e6; padding: 20px;">A: Yes, the alert sounds are standardized and recognized by all personnel to ensure quick and accurate responses during emergencies.</p>
                        </div>
                    </div>
                </div>
                
                <script>
                    // Function to toggle the visibility of individual Q&A answers
                    function toggleAnswer(answerID) {
                        const answer = document.getElementById(answerID);
                        answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
                    }
                </script>

                <div id="contact-section" class="content-section" style="display:none;">
                    <h2>Contact Us</h2>
                    <p>If you would like to learn more about UraLeb or collaborate with our research teams, feel free to reach out:</p>
                    <p><strong>Address</strong>: UraLeb Headquarters, Beirut, Lebanon</p>
                    <p><strong>Email</strong>: contact@uraleb.org</p>
                    <p><strong>Phone</strong>: [Redacted]</p>
                </div>

                <div id="password-section" class="content-section" style="display:none;">
                    <h2>Enter Password to Access Employee Section</h2>
                    <p>Please enter the password to view the employee hub:</p>
                    <input type="password" id="password-input" placeholder="Enter password" style="padding: 5px; width: 200px;">
                    <button onclick="checkPassword()" class="nav-button">Submit</button>
                    <div id="error-message" style="color: red; display: none;"></div>
                </div>

                <div id="employee-section" class="content-section" style="display:none;">
                    <!-- Large office image -->
                    <div class="header-section">
                        <img src="path/to/office-image.jpg" alt="Office Image" class="office-image">
                    </div>
                
                    <!-- Main content section for buttons and widgets -->
                    <div class="main-content">
                        <h2>Employee Portal</h2>
                        <p>Welcome to the portal. Please select an option to proceed:</p>
                
                        <div class="button-container">
                            <button onclick="showLoading('logs-section')" class="nav-button">View Research Logs</button>
                            <button onclick="showLoading('faults-section')" class="nav-button">View Power Plant Faults</button>
                            <button onclick="showLoading('plant-section')" class="nav-button">Access Remote Plant Controls</button>
                        </div>
                    </div>
                
                    <!-- Sidebar widgets for clock, calendar, and weather -->
                    <div class="sidebar-widgets">
                        <!-- Analog clock widget -->
                        <div id="clock-widget" class="widget clock-widget">
                            <canvas id="analog-clock" width="120" height="120"></canvas>
                        </div>
                
                        <!-- Calendar widget -->
                        <div id="calendar-widget" class="widget calendar-widget">
                            <p id="calendar-date"></p>
                        </div>
                
                        <!-- Weather widget -->
                        <div id="weather-widget" class="widget weather-widget">
                            <p id="weather-info">Weather: Sunny, 25°C</p>
                        </div>
                    </div>
                </div>
                
                <!-- CSS for layout and styling -->
                <style>
                    .content-section {
                        display: flex;
                        justify-content: space-between;
                        align-items: flex-start;
                        margin-top: 20px;
                    }
                
                    .header-section {
                        width: 100%;
                        text-align: center;
                        margin-bottom: 20px;
                    }
                
                    .office-image {
                        width: 100%;
                        height: auto;
                        max-height: 250px;
                    }
                
                    .main-content {
                        flex-grow: 1;
                        text-align: center;
                    }
                
                    .sidebar-widgets {
                        display: flex;
                        flex-direction: column;
                        gap: 10px;
                        margin-left: 20px;
                        width: 200px; /* Adjust the width as needed */
                    }
                
                    .widget {
                        background: #f0f0f0;
                        padding: 10px;
                        border: 1px solid #ccc;
                        border-radius: 5px;
                        text-align: center;
                        font-family: 'Courier New', Courier, monospace;
                    }
                
                    .button-container {
                        display: flex;
                        justify-content: center;
                        gap: 15px;
                        margin-top: 15px;
                    }
                
                    .nav-button {
                        padding: 10px 20px;
                        background-color: #007bff;
                        color: white;
                        border: none;
                        border-radius: 5px;
                        cursor: pointer;
                        font-family: 'Courier New', Courier, monospace;
                    }
                
                    .nav-button:hover {
                        background-color: #0056b3;
                    }
                </style>
                
                <!-- JavaScript for clock and calendar functionality -->
                <script>
                    function updateAnalogClock() {
                        const canvas = document.getElementById('analog-clock');
                        const ctx = canvas.getContext('2d');
                        const radius = canvas.height / 2;
                
                        // Clear the canvas
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.translate(radius, radius); // Move the origin to the center of the clock
                        ctx.rotate(-Math.PI / 2); // Rotate to make 12 at the top
                
                        const now = new Date();
                        const hour = now.getHours() % 12;
                        const minute = now.getMinutes();
                        const second = now.getSeconds();
                
                        drawClockFace(ctx, radius);
                        drawClockHands(ctx, radius, hour, minute, second);
                        
                        // Reset transformations
                        ctx.rotate(Math.PI / 2); // Rotate back to original orientation
                        ctx.translate(-radius, -radius); // Move back to original position
                    }
                
                    function drawClockFace(ctx, radius) {
                        ctx.beginPath();
                        ctx.arc(0, 0, radius - 10, 0, 2 * Math.PI);
                        ctx.fillStyle = 'white';
                        ctx.fill();
                        ctx.lineWidth = 2;
                        ctx.stroke();
                
                        // Draw lines for hour markers
                        ctx.lineWidth = 2;
                        for (let i = 1; i <= 12; i++) {
                            const angle = (i * Math.PI) / 6; // Angle in radians
                            const x1 = (radius - 15) * Math.cos(angle);
                            const y1 = (radius - 15) * Math.sin(angle);
                            const x2 = (radius - 25) * Math.cos(angle);
                            const y2 = (radius - 25) * Math.sin(angle);
                            ctx.beginPath();
                            ctx.moveTo(x1, y1);
                            ctx.lineTo(x2, y2);
                            ctx.stroke();
                        }
                    }
                
                    function drawClockHands(ctx, radius, hour, minute, second) {
                        // Hour hand
                        ctx.save();
                        ctx.rotate((hour * Math.PI) / 6 + (minute * Math.PI) / 360 + Math.PI / 2); // Offset by 90 degrees
                        ctx.beginPath();
                        ctx.moveTo(0, 0);
                        ctx.lineTo(0, -radius * 0.5);
                        ctx.lineWidth = 8;
                        ctx.stroke();
                        ctx.restore();
                
                        // Minute hand
                        ctx.save();
                        ctx.rotate((minute * Math.PI) / 30 + Math.PI / 2); // Offset by 90 degrees
                        ctx.beginPath();
                        ctx.moveTo(0, 0);
                        ctx.lineTo(0, -radius * 0.75);
                        ctx.lineWidth = 4;
                        ctx.stroke();
                        ctx.restore();
                
                        // Second hand
                        ctx.save();
                        ctx.rotate((second * Math.PI) / 30 + Math.PI / 2); // Offset by 90 degrees
                        ctx.beginPath();
                        ctx.moveTo(0, 0);
                        ctx.lineTo(0, -radius * 0.9);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = 'red';
                        ctx.stroke();
                        ctx.restore();
                    }
                
                    function updateCalendar() {
                        const calendarElement = document.getElementById('calendar-date');
                        const today = new Date();
                        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                        calendarElement.textContent = today.toLocaleDateString(undefined, options);
                    }
                
                    setInterval(updateAnalogClock, 1000);
                    updateAnalogClock(); // Initial call to set clock immediately
                    updateCalendar();
                </script>

                <!-- Loading Window -->
                <div id="loading-window" class="loading-window" style="display:none;">
                    <p id="loading-text">Connecting...</p>
                    <div class="throbber">
                        <div class="throbber-bar"></div>
                    </div>
                    <button id="cancel-btn" onclick="cancelLoading()">Cancel</button>
                </div>
                
                <style>
                    .loading-window {
                        background-color: #f0f0f0;
                        border: 1px solid #ccc;
                        padding: 10px;
                        width: 300px;
                        text-align: center;
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        font-family: 'Courier New', Courier, monospace;
                        font-size: 14px;
                        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);
                    }
                
                    .throbber {
                        width: 100%;
                        height: 10px;
                        background-color: #ccc;
                        margin: 10px 0;
                        overflow: hidden;
                        position: relative;
                    }
                
                    .throbber-bar {
                        width: 0;
                        height: 100%;
                        background-color: #4CAF50;
                        animation: throbber-animation 2s linear infinite;
                    }
                
                    @keyframes throbber-animation {
                        0% { width: 0; }
                        50% { width: 100%; }
                        100% { width: 0; }
                    }
                </style>
                
                <script>
                    let loadingInProgress = false; // Track if loading is in progress
                
                    function showLoading(sectionId) {
                        // Show the loading window
                        const loadingWindow = document.getElementById('loading-window');
                        loadingWindow.style.display = 'block';
                        loadingInProgress = true; // Set loading status
                
                        // Simulate loading process with random timing
                        const connectionDelay = Math.floor(Math.random() * 3000) + 1000; // Random delay between 1 to 4 seconds
                        const retrievalDelay = Math.floor(Math.random() * 3000) + 1000; // Random delay between 1 to 4 seconds
                
                        let loadingText = document.getElementById('loading-text');
                        loadingText.innerText = "Connecting...";
                
                        setTimeout(() => {
                            if (loadingInProgress) { // Check if loading is still in progress
                                loadingText.innerText = "Retrieving data...";
                                // Simulate data retrieval delay
                                setTimeout(() => {
                                    if (loadingInProgress) { // Check if loading is still in progress
                                        loadingWindow.style.display = 'none';
                                        displaySection(sectionId); // Call function to display the selected section
                                    }
                                }, retrievalDelay);
                            }
                        }, connectionDelay);
                    }
                
                    function cancelLoading() {
                        loadingInProgress = false; // Set loading status to false
                        const loadingWindow = document.getElementById('loading-window');
                        loadingWindow.style.display = 'none'; // Hide the loading window immediately
                    }
                </script>


                <div id="logs-section" class="content-section" style="display:none;">
                    <h2>Research Logs</h2>
                    <ul>
                        <li>
                            <strong>Date:</strong> 12/08/2024 <br>
                            <i>Uranium-235 experiments showed promising results, achieving a new breakthrough in isotope separation.</i>
                        </li>
                        <li>
                            <strong>Date:</strong> 23/09/2024 <br>
                            <i>Initial safety inspections completed with no significant issues reported.</i>
                        </li>
                        <li>
                            <strong>Date:</strong> 30/09/2024 <br>
                            <i>New safety protocols implemented across all facilities.</i>
                        </li>
                    </ul>
                    <button onclick="displaySection('employee-section')" class="nav-button">Back</button>
                </div>

                <div id="plant-section" class="content-section" style="display:none;">
                    <h2>Employee Portal</h2>
                    <p>Welcome to the UraLeb Employee Portal. Here you can monitor the status of our power plant operations.</p>
                    
                    <h3>Power Plant SCADA Status</h3>
                    <div class="scada-dashboard">
                        <div class="status-box" id="plant-status-box">
                            <h4>Plant Status</h4>
                            <p id="plant-status"><strong>Operational</strong></p>
                            <img src="nuclear-power.png" alt="Operational Icon" class="status-icon" />
                            <div class="virtual-valve" id="emergency-valve" onclick="confirmEmergencyShutoff()">
                                <span class="valve-status" id="valve-status">Open</span>
                                <span class="valve-label">Emergency Shutoff</span>
                            </div>
                            <div class="status-light" id="plant-status-light"></div>
                            <div class="gauge" id="plant-gauge"></div>
                        </div>
                        <div class="status-box" id="temperature-box">
                            <h4>Temperature</h4>
                            <p id="temperature"><strong>75°C</strong></p>
                            <img src="temperature.png" alt="Temperature Icon" class="status-icon" />
                            <div class="status-light" id="temperature-light"></div>
                            <div class="gauge" id="temperature-gauge"></div>
                        </div>
                        <div class="status-box" id="pressure-box">
                            <h4>Pressure</h4>
                            <p id="pressure"><strong>150 Bar</strong></p>
                            <img src="flexibility.png" alt="Pressure Icon" class="status-icon" />
                            <div class="status-light" id="pressure-light"></div>
                            <div class="gauge" id="pressure-gauge"></div>
                        </div>
                        <div class="status-box" id="radiation-box">
                            <h4>Radiation Levels</h4>
                            <p id="radiation-levels"><strong>0.10 µSv/h</strong></p>
                            <img src="radiation.png" alt="Radiation Icon" class="status-icon" />
                            <div class="status-light" id="radiation-light"></div>
                            <div class="gauge" id="radiation-gauge"></div>
                        </div>
                        <div class="status-box" id="energy-box">
                            <h4>Energy Output</h4>
                            <p id="energy-output"><strong>100 MW</strong></p>
                            <img src="power-grid.png" alt="Energy Icon" class="status-icon" />
                            <div class="status-light" id="energy-light"></div>
                            <div class="gauge" id="energy-gauge"></div>
                        </div>
                    </div>
                    
                        <h3>SCADA Controls</h3>
                        <input type="password" id="password-input2" placeholder="Enter Password" />
                        <div id="error-message" style="color:red; display:none;">Incorrect password. Access denied.</div>
                        
                        <button class="retro-button" id="emergency-shutoff-btn" onclick="confirmEmergencyShutoff()">Toggle Emergency Shutoff</button>
                        <div id="control1" style="display:none;">
                            <p>Emergency shutoff is now <span id="control-status">OFF</span>.</p>
                        </div>
                        
                        <button class="retro-button" id="backup-generator-btn" onclick="confirmBackupGenerator()">Toggle Backup Generator</button>
                        <div id="control2" style="display:none;">
                            <p>Backup generator is now <span id="backup-status">OFF</span>.</p>
                        </div>
                    </div>
                    <script>
                        let tempValue = 75;
                        let pressureValue = 150;
                        let radValue = 0.1;
                        let energyValue = 100;
                    
                        const originalTempValue = tempValue;
                        const originalPressureValue = pressureValue;
                        const originalRadValue = radValue;
                        const originalEnergyValue = energyValue;
                    
                        let isPlantOperational = true; // Track if the plant is operational
                        let shutdownInterval, restartInterval; // Global intervals to prevent overlap
                    
                        // Function to simulate gradual value changes
                        function updateValues() {
                            const temperature = document.getElementById('temperature');
                            const pressure = document.getElementById('pressure');
                            const radiation = document.getElementById('radiation-levels');
                            const energy = document.getElementById('energy-output');
                    
                            setInterval(() => {
                                tempValue += Math.random() > 0.5 ? 1 : -1;
                                pressureValue += Math.random() > 0.5 ? 1 : -1;
                                radValue += (Math.random() * 0.1).toFixed(2) * (Math.random() > 0.5 ? 1 : -1);
                                energyValue += Math.random() > 0.5 ? 2 : -2;
                
                                radValue = Math.max(0, parseFloat(radValue.toFixed(2))); // Cap at 0
                    
                                // Update the displayed values
                                temperature.innerHTML = `<strong>${tempValue}°C</strong>`;
                                pressure.innerHTML = `<strong>${pressureValue} Bar</strong>`;
                                radiation.innerHTML = `<strong>${radValue} µSv/h</strong>`;
                                energy.innerHTML = `<strong>${energyValue} MW</strong>`;
                    
                                // Update gauges
                                document.getElementById('temperature-gauge').style.width = `${tempValue}%`;
                                document.getElementById('pressure-gauge').style.width = `${(pressureValue / 2)}%`;
                                document.getElementById('radiation-gauge').style.width = `${(radValue * 100).toFixed(2)}%`;
                                document.getElementById('energy-gauge').style.width = `${(energyValue / 2)}%`;
                            }, 2000); // Update every 2 seconds
                        }
                    
                        function confirmEmergencyShutoff() {
                            const password = document.getElementById('password-input2').value;
                            const errorMessage = document.getElementById('error-message');
                            const btn = document.getElementById('emergency-shutoff-btn');
                    
                            if (password === '1995') {
                                errorMessage.style.display = 'none';
                                btn.disabled = true;
                                btn.textContent = "Sending...";
                                setTimeout(() => {
                                    toggleEmergencyShutoff();
                                    btn.disabled = false;
                                    btn.textContent = "Toggle Emergency Shutoff";
                                }, 2000); // Simulate delay
                            } else {
                                errorMessage.style.display = 'block';
                            }
                        }
                    
                        function confirmBackupGenerator() {
                            const password = document.getElementById('password-input2').value;
                            const errorMessage = document.getElementById('error-message');
                            const btn = document.getElementById('backup-generator-btn');
                    
                            if (password === '1995') {
                                errorMessage.style.display = 'none';
                                btn.disabled = true;
                                btn.textContent = "Sending...";
                                setTimeout(() => {
                                    toggleBackupGenerator();
                                    btn.disabled = false;
                                    btn.textContent = "Toggle Backup Generator";
                                }, 2000); // Simulate delay
                            } else {
                                errorMessage.style.display = 'block';
                            }
                        }
                    
                        function toggleBackupGenerator() {
                            const backupStatus = document.getElementById('backup-status');
                            backupStatus.innerHTML = backupStatus.innerHTML === 'OFF' ? 'ON' : 'OFF';
                            const control2 = document.getElementById('control2');
                            control2.style.display = 'block';
                            blinkLight('energy-light');
                        }
                    
                        function gradualShutdown() {
                            clearInterval(restartInterval); // Ensure no overlapping intervals
                    
                            shutdownInterval = setInterval(() => {
                                if (tempValue > 21) tempValue -= 1;
                                if (pressureValue > 0) pressureValue -= 1;
                                if (radValue > 0) radValue = (radValue - 0.01).toFixed(2);
                                if (energyValue > 0) energyValue -= 2;
                    
                                // Cap values to prevent going below minimum
                                tempValue = Math.max(tempValue, 21);
                                pressureValue = Math.max(pressureValue, 0);
                                radValue = Math.max(radValue, 0).toFixed(2);
                                energyValue = Math.max(energyValue, 0);
                    
                                // Update displayed values
                                document.getElementById('temperature').innerHTML = `<strong>${tempValue}°C</strong>`;
                                document.getElementById('pressure').innerHTML = `<strong>${pressureValue} Bar</strong>`;
                                document.getElementById('radiation-levels').innerHTML = `<strong>${radValue} µSv/h</strong>`;
                                document.getElementById('energy-output').innerHTML = `<strong>${energyValue} MW</strong>`;

                                document.getElementById('temperature-gauge').style.width = `${tempValue}%`;
                                document.getElementById('pressure-gauge').style.width = `${(pressureValue / 2)}%`;
                                document.getElementById('radiation-gauge').style.width = `${(radValue * 100).toFixed(2)}%`;
                                document.getElementById('energy-gauge').style.width = `${(energyValue / 2)}%`;
                    
                                if (tempValue === 21 && pressureValue === 0 && radValue === '0.00' && energyValue === 0) {
                                    clearInterval(shutdownInterval); // Stop shutdown when all values reach minimum
                                }
                            }, 500); // Update every 500ms for smoother transition
                        }
                    
                        function gradualRestart() {
                            clearInterval(shutdownInterval); // Ensure no overlapping intervals
                    
                            restartInterval = setInterval(() => {
                                if (tempValue < originalTempValue) tempValue += 1;
                                if (pressureValue < originalPressureValue) pressureValue += 1;
                                if (radValue < originalRadValue) radValue = (parseFloat(radValue) + 0.01).toFixed(2);
                                if (energyValue < originalEnergyValue) energyValue += 2;
                                updateValues();
                                
                                // Cap values to avoid exceeding the original values
                                tempValue = Math.min(tempValue, originalTempValue);
                                pressureValue = Math.min(pressureValue, originalPressureValue);
                                radValue = Math.min(radValue, originalRadValue).toFixed(2);
                                energyValue = Math.min(energyValue, originalEnergyValue);
                    
                                // Update displayed values
                                document.getElementById('temperature').innerHTML = `<strong>${tempValue}°C</strong>`;
                                document.getElementById('pressure').innerHTML = `<strong>${pressureValue} Bar</strong>`;
                                document.getElementById('radiation-levels').innerHTML = `<strong>${radValue} µSv/h</strong>`;
                                document.getElementById('energy-output').innerHTML = `<strong>${energyValue} MW</strong>`;

                                document.getElementById('temperature-gauge').style.width = `${tempValue}%`;
                                document.getElementById('pressure-gauge').style.width = `${(pressureValue / 2)}%`;
                                document.getElementById('radiation-gauge').style.width = `${(radValue * 100).toFixed(2)}%`;
                                document.getElementById('energy-gauge').style.width = `${(energyValue / 2)}%`;
                                
                    
                                if (tempValue === originalTempValue && pressureValue === originalPressureValue && energyValue === originalEnergyValue) {
                                    clearInterval(restartInterval); // Stop restart when all values reach target
                                    updateValues();
                                }
                            }, 500); // Update every 500ms
                        }
                    
                        function toggleEmergencyShutoff() {
                            const valveStatus = document.getElementById('valve-status');
                            const status = document.getElementById('control-status');
                            
                            // Check if the plant is currently operational
                            if (isPlantOperational) {
                                isPlantOperational = false; // Turn off the plant
                                gradualShutdown(); // Gradually decrease values
                                valveStatus.innerHTML = 'Active';
                                status.textContent = 'OFF'; // Update control status
                            } else {
                                isPlantOperational = true; // Reactivate the plant
                                gradualRestart(); // Gradually increase values
                                valveStatus.innerHTML = 'Inactive';
                                status.textContent = 'ON'; // Update control status
                            }
                            
                            blinkLight('plant-status-light'); // Blink the status light
                        }
                        function blinkLight(lightId) {
                            const light = document.getElementById(lightId);
                            light.classList.add('blinking');
                            setTimeout(() => {
                                light.classList.remove('blinking');
                            }, 500);
                        }
                    
                        // Initialize values on page load
                        document.addEventListener('DOMContentLoaded', () => {
                            updateValues(); // Start updating values once the page is ready
                        });
                    </script>
                  
                <style>
                    .scada-dashboard {
                        display: grid;
                        grid-template-columns: repeat(3, 1fr);
                        gap: 20px;
                        margin-bottom: 20px;
                        position: relative; /* Added for arrow positioning */
                    }
                
                    .status-box {
                        padding: 15px;
                        text-align: center;
                        background-color: #fff;
                        position: relative;
                        outline: 1px solid black;
                        box-shadow: 10px 10px darkgrey;
                    }
                
                    .status-icon {
                        margin-top: 10px;
                        width: 30px; /* Adjust icon size */
                        height: auto;
                    }
                
                    .virtual-valve {
                        margin-top: 10px;
                        padding: 10px;
                        border: 2px dashed #2980b9;
                        cursor: pointer;
                        position: relative;
                    }
                
                    .valve-status {
                        font-weight: bold;
                        color: #2980b9;
                    }
                
                    .gauge {
                        width: 25%;
                        height: 10px;
                        background-color: #2980b9;
                        margin-top: 5px;
                        overflow: hidden;
                        box-shadow: 3px 3px lightgrey;
                    }
                
                    .gauge::after {
                        content: '';
                        display: block;
                        height: 100%;
                        width: 0;
                        background-color: #0f0;
                        transition: width 1s;
                    }
                
                    /* New blinking status light styles */
                    .status-light {
                        width: 8px;
                        height: 8px;
                        background-color: #ff0000; /* Initial color */
                        border-radius: 50%;
                        position: absolute;
                        top: 5px;
                        right: 5px;
                        animation: blink 1s infinite alternate;
                    }
                
                    @keyframes blink {
                        0% { opacity: 1; }
                        100% { opacity: 0; }
                    }
                
                    /* New blinking class */
                    .blinking {
                        animation: blink 0.5s infinite alternate;
                    }
                </style>
            </div>
                <div id="faults-section" class="content-section" style="display:none;">
                    <h2>Factory Faults</h2>
                        <style>
                            table {
                                width: 100%;
                                border-collapse: collapse;
                            }
                            th, td {
                                border: 1px solid #BDC3C7;
                                padding: 8px;
                                text-align: left;
                            }
                            th {
                                background-color: #3498DB;
                                color: white;
                                cursor: pointer; /* Change cursor to pointer on header */
                            }
                            .sorted-asc {
                                background-color: #A7C6ED; /* Light blue for ascending sort */
                            }
                            .sorted-desc {
                                background-color: #A7C6ED; /* Light blue for descending sort */
                            }
                            th.sorted-asc::after {
                                content: ' 🠝'; /* Up arrow for ascending */
                            }
                            th.sorted-desc::after {
                                content: ' 🠟'; /* Down arrow for descending */
                            }
                            th.active {
                                background-color: #59a3ff; /* Highlight the active column */
                            }

                        </style>
                    <button onclick="displaySection('employee-section')" class="nav-button">Back</button>
                           <table id="dataTable">
                                <thead>
                                    <tr>
                                        <th onclick="sortTable(0)">Date</th>
                                        <th onclick="sortTable(1)">Severity</th>
                                        <th onclick="sortTable(2)">Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="background-color: #90EE90;">
                                        <td>01/10/2024</td>
                                        <td>Minor</td>
                                        <td>Low Pressure detected in reactor unit 3, requires monitoring.</td>
                                    </tr>
                                    <tr style="background-color: #FFB6C1;">
                                        <td>19/01/2023</td>
                                        <td>High</td>
                                        <td>Contaminated sample results from reactor 1.</td>
                                    </tr>
                                    <tr style="background-color: #FFFF99;">
                                        <td>05/10/2024</td>
                                        <td>Moderate</td>
                                        <td>Overheating in reactor 2, precaution advised.</td>
                                    </tr>
                                    <tr style="background-color: #FF4500;">
                                        <td>04/01/2022</td>
                                        <td>Critical</td>
                                        <td>Severe radiation leak detected, lockdown procedure initiated.</td>
                                    </tr>
                                    <tr style="background-color: #90EE90;">
                                        <td>10/10/2024</td>
                                        <td>Minor</td>
                                        <td>Routine check reveals slight vibrations in reactor unit 1.</td>
                                    </tr>
                                    <tr style="background-color: #FFFF99;">
                                        <td>15/11/2010</td>
                                        <td>Moderate</td>
                                        <td>Power fluctuation detected in Unit 5.</td>
                                    </tr>
                                    <tr style="background-color: #FFB6C1;">
                                        <td>30/12/2024</td>
                                        <td>High</td>
                                        <td>Integrity test failure on reactor 4, further analysis needed.</td>
                                    </tr>
                                    <tr style="background-color: #90EE90;">
                                        <td>30/11/2024</td>
                                        <td>Minor</td>
                                        <td>Minor leak in waste management area, contained.</td>
                                    </tr>
                                    <tr style="background-color: #FF4500;">
                                        <td>25/11/2004</td>
                                        <td>Critical</td>
                                        <td>Cooling system failure reported in Reactor 3, emergency response activated.</td>
                                    </tr>
                                    <tr style="background-color: #FFFF99;">
                                        <td>25/10/2020</td>
                                        <td>Moderate</td>
                                        <td>Increased humidity levels detected in storage area.</td>
                                    </tr>
                                    <tr style="background-color: #90EE90;">
                                        <td>09/01/2007</td>
                                        <td>Minor</td>
                                        <td>Maintenance reminder for gas detection systems.</td>
                                    </tr>
                                    <tr style="background-color: #FFFF99;">
                                        <td>03/02/2021</td>
                                        <td>Moderate</td>
                                        <td>Unscheduled maintenance required for emergency generator.</td>
                                    </tr>
                                    <tr style="background-color: #FFB6C1;">
                                        <td>08/02/2011</td>
                                        <td>High</td>
                                        <td>Radiation sensor malfunction reported, immediate check needed.</td>
                                    </tr>
                                    <tr style="background-color: #FF4500;">
                                        <td>15/12/2024</td>
                                        <td>Critical</td>
                                        <td>Reactor containment breach reported, evacuation initiated.</td>
                                    </tr>
                                    <tr style="background-color: #90EE90;">
                                        <td>20/12/2015</td>
                                        <td>Minor</td>
                                        <td>Visual inspection required for turbine blade wear.</td>
                                    </tr>
                                    <tr style="background-color: #FFFF99;">
                                        <td>14/01/2018</td>
                                        <td>Moderate</td>
                                        <td>Fluctuations in coolant flow observed.</td>
                                    </tr>
                                </tbody>
                            </table>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center" bgcolor="#f2f6fc" style="text-align: center;">
                <p>&copy; 2024 UraLeb. All Rights Reserved.</p>
            </td>
        </tr>
    </table>
</body>
</html>
